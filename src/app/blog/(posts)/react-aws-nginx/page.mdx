export const metadata = {
  title: 'React와 AWS 그리고 NGINX',
  description: '',
  category: '',
  createdAt: '2023-01-18T14:28:37.509Z',
  thumbnailImg:
    'https://edqtpvyrloqd28014065.gcdn.ntruss.com/blog/react-aws-nginx/image01.png',
  tags: ['Nginx', 'React', 'aws', 'ec2'],
};

<BlogTitle {...metadata} />

이번에는 제가 개발하면서 생긴 경험을 바탕으로한 설정 방법이 아닌 사이드 프로젝트를 진행하면서 알게된 내용들을 정리해보려고 합니다. 바로 React와 AWS, 그리고 웹서버하면 가장 대표적인 소프트웨어, NGINX에 관한 내용을 정리해보려고 합니다. 그리고 막간에 이 사이드 프로젝트를 진행한 후 드는 제 생각들을 좀 정리해보려고 합니다.

# React

![](https://edqtpvyrloqd28014065.gcdn.ntruss.com/blog/react-aws-nginx/image02.png)
react는 페이스북(메타)에서 개발한 자바스크립트 라이브러리입니다. 배포 초기 자바스크립트는 간단한 연산만 진행하거나 시각적인 효과를 제공하는 단순 스크립트 언어에 불과했습니다. 하지만 지금은 백엔드와 서버 사이드는 물론, 모바일 앱, 데스크탑 애플리케이션에서도 엄청난 활약을 보여주는 언어로 성장하게 됩니다.
가장 대표적으로 Slack, Atom, VSCode와 같은 정말 유명한 애플리케이션이 Electron(자바스크립트로 데스크탑 애플리케이션을 개발할 수 있는 프레임워크)으로 개발되었습니다.
이제 자바스크립트만으로도 다양한 애플리케이션을 개발할 수 있는 시대가 된 것입니다. 하지만 아무리 자바스크립트로 다양한 애플리케이션을 개발할 수 있어도, 기존의 방식인 순수 HTML, CSS를 사용해 애플리케이션을 개발하는 것은 정말 보통일이 아닙니다. 포스트에서 이런 예기하기 좀 그렇지만, 정말 노가다(?) 그 자체라고 해도 과언이 아닐 것입니다.
이런 문제로 인해 Vue, Angular와 같은 수많은 프레임워크가 개발되어 세상에 나왔습니다. 하지만 Vue와 Angular 같은 프레임워크들은 주로 MVC(Model-View-Controller), MVVM(Model-View-View Model)과 같은 아키텍처를 채택하면서 컨트롤러에서 변동이 일어난 특정부분의 뷰를 변경하는 식으로 진행됩니다. 이러한 방식은 애플리케이션의 규모가 커지면 구조가 상당히 복잡해지고 제대로 관리하지 않으면 **성능 저하로 이어질 수 있습니다**.
이러한 문제를 해결하기 위해 페이스북에서 개발한 것이 바로 **React**였습니다. 다른 프레임워크와 달리 React는 오로지 **V(View)**만 신경쓰는 라이브러리이고, 데이터가 변할 때마다 어떤 변화를 줄지 고민하는 대신, 기존 뷰를 날려버리고 처음부터 새로 렌더링하는 방식을 채택합니다.

# AWS

![](https://edqtpvyrloqd28014065.gcdn.ntruss.com/blog/react-aws-nginx/image03.jpg)
저처럼 개발을 업으로 하고 계신 분이라면 거의 상식처럼 알고 계시겠지만, 그래도 정리를 해보겠습니다. AWS는 세계 최대 전자상거래 기업, 아마존의 클라우드 컴퓨팅 사업부입니다. Amazon Web Service의 약자이죠. 보통 서버를 구축한다면 직접 컴퓨터를 여러대 구매한 다음 환경설정을 해서 서버를 구축하곤 합니다. 하지만 이 경우 만약에 내가 개발한 서비스가 완전 초대박이 터져 사람들의 접속이 갑자기 늘어나버리면, 늘어난 사용자만큼 다시 새 컴퓨터를 구매해서 트래픽을 늘리기 전에 서버의 접속량을 초과해버려 사용자의 접속이 불가능해집니다. 보통 서버가 터진다고들 하죠. 우리가 예전에 공공기관 사이트 같은데서 뭔가를 해야되는데 사용자가 갑자기 몰리면서 사이트의 접속이 불가능해지는 것이 바로 이 때문입니다. 그리고 이 방법은 물리적으로 여러대의 컴퓨터를 구매해야 한다는 것이기 때문에 많은 비용을 지불해야 한다는 문제점도 있습니다.
하지만 일부 대기업이 구축한 가상의 서버를 임대하는 방식을 사용한다면 갑자기 사용자가 몰릴 때 발생하는 트래픽 문제를 해소할 수 있고, 서버 구축을 위해 구매해야 하는 컴퓨터 비용과 물리적인 공간 확보 문제를 해결할 수 있습니다. 늘어난 트래픽과 사용량에 따라서 비용을 지불하면 되기 때문이죠. 그리고 이런 클라우드 컴퓨팅 업계에서 큰형님과 같은 서비스가 바로 AWS입니다.

실제로 AWS를 접해보면 정말 많은 서비스가 존재하는 것을 알수 있는데요, 웹사이트를 개발하면서 사용하게 될 AWS의 가장 대표적인 서비스가 바로 클라우드 컴퓨팅 서비스 **[EC2(Elastic Compute Cloud)](https://aws.amazon.com/ko/ec2/?nc2=h_ql_prod_fs_ec2)**, 클라우드 파일 스토리지 서비스 **[S3(Simple Storage Service)](https://aws.amazon.com/ko/s3/?nc2=h_ql_prod_fs_s3)**, DNS 서비스 **[Route53](https://aws.amazon.com/ko/route53/?nc2=type_a)** 등입니다.

## EC2 인스턴스 구축 후 접속하기

이 부분은 저도 AWS를 처음 접하고 많이 해맸던 부분인데요, EC2에 인스턴스를 생성하고 터미널을 통해 접속하는 부분이 어려울 수 있습니다. 만약 예전의 저처럼 EC2 인스턴스에 접속하는 데 어려움이 있다면 이렇게 하십시오!
우선 생성한 인스턴스에 접속합니다. 그리고 상단에 연결이라고 쓰여진 부분이 있습니다.
![](https://edqtpvyrloqd28014065.gcdn.ntruss.com/blog/react-aws-nginx/image04.png)
그 버튼을 누르면 다음과 같은 화면이 나오는데요.
![](https://edqtpvyrloqd28014065.gcdn.ntruss.com/blog/react-aws-nginx/image05.png)
그안에서 보여지는 사용자 이름과 퍼블릭 IP 주소가 인스턴스 접속시 필요한 정보입니다.

인스턴스 생성시 함께 만드시거나 연결하신 keypair 파일을 컴퓨터 내 원하는 폴더에 추가하고 터미널을 통해 keypair 파일이 있는 경로로 이동합니다.
처음 접속하시는 경우라면 터미널에

```
chmod 400 <keypair 파일명>.pem
```

명령어를 실행하고, 그 다음에

```
ssh -i "<keypair 파일명>.pem" <사용자 이름>@<퍼블릭 IP 주소>
```

이 명령어를 실행하면 인스턴스에 접속할 수 있습니다.
(참고로 이 명령어는 Mac OS를 기준으로 작성한 내용입니다.)

## AWS 사용시 유의사항

AWS를 사용하실 때는 한가지 유의사항이 있습니다. 바로 **요금 과다 청구 문제**입니다. 간혹 일부 포스트를 보면 EC2 인스턴스(가상 서버)의 보안설정이 제대로 안되어 있어 **누군가가 인스턴스에 몰래 접속해 코인 채굴을 한다거나**, AWS 내부 설정이 잘 안되어 있어 이로 인해 **요금이 과다 청구되는 문제**를 심심치 않게 찾아보실 수 있습니다. 저도 지금은 사이드 프로젝트를 내리기는 했지만 EC2 인스턴스는 아직 살아있기 때문에 최소 1주일에 한번 AWS 콘솔에 접속해서 현재 청구된 요금을 확인하고 있습니다. 이런 문제가 여러 사람들에 의해 자주 발생하는 일인 만큼 실제로 AWS를 사용하시게 된다면 이 점에 유의해주시고, 사용하지 않는 인스턴스는 과감히 삭제하시는 등의 조치를 취하시기 바랍니다.

# NGINX

![](https://edqtpvyrloqd28014065.gcdn.ntruss.com/blog/react-aws-nginx/image06.png)
이제 이 포스트에서의 핵심 중 하나이죠. NGINX는 아파치와 같은 웹서버인데요, 정확히 말하자면 경량 웹서버입니다. 이를 이해하기 위해서 웹 서버에 대해서 알 필요가 있을 것 같네요..

초창기 웹 서비스는 단순히 정보 전달이 목적인 문서 위주의 정적 페이지였습니다. 그 이후에 스크립트를 얹은 동적 페이지가 나왔지만 이때만 해도 서버에 데이터를 처리하고 클라이언트로 전송하는데 크게 문제되지는 않았습니다.
하지만 SPA(Single Page Application)이 등장하면서 페이지 갱신에 필요한 데이터만 찾아서 갱신하게 되었고 이에 따라 복잡한 연산이 필요해져 서버에 부하가 발생할 가능성이 커져 서버를 분리할 필요성이 나타나기 시작했습니다.

이때 등장한 개념이 바로 웹 서버와 WAS(Web Application Server) 입니다. 웹 서버는 클라이언트의 요청을 처리하는 기능을 맡게 되고, WAS는 DB조회나 다양한 동적 컨텐츠를 제공하는 역할을 합니다. 그리고 이 웹서버의 구축을 도와주는 소프트웨어가 바로 NGINX입니다.
NGINX와 같은 대표적인 웹서버 소프트웨어로 Apache Tomcat이 있는데요, Apache Tomcat은 스레드/프로세스기반으로 작동하는데, 요청 하나당 스레드 하나가 담당해서 요청을 처리하게 되는데 사용자가 많아지면 부하로 인해 속도가 저하될 수 있는 문제가 있습니다. 하지만 NGINX는 비동기 이벤트를 기반으로 작동하는데, 요청이 들어오면 어떤 동작을 수행해야하는지 알려만 주고 다음 요청을 수행하는 방식이기 때문에 Apache Tomcat보다 가볍고 응답이 빠르다는 장점이 있습니다.

# 사이드 프로젝트 이후의 생각

제가 사실은 React-Native를 사용하는 2년차 모바일 개발자입니다. 사실 취직하고 첫 1년동안은 웹에 별로 관심이 없었습니다. 하지만 시간이 지나면서 어느덧 이직을 고민해야 할 시기가 오면서 불안감이 들면서 웹과 Node.js를 사용한 백엔드도 접하게 되었습니다. 처음에는 모바일 외에 다른 분야도 과연 괜찮을까하는 생각이 앞섰지만, 실제로 접해보니 정말 재미를 느꼈던 것 같습니다. 사실 부끄럽지만, 제가 이 포스트에서 언급한 사이드 프로젝트도 Velog의 클론 코딩과 같았는데요, ui는 제 방식으로 바꿔서 하다보니까 도메인도 없고 어설프게 반응형 페이지 만들어서 Node.js로 백엔드 구축을 해서 진행을 했었죠.(지금 생각해도 정말 어설프긴 하네요 ㅎㅎㅎ)

사실 지금 회사에서도 일하는 사람들이 줄면서 세사람, 네사람 몫을 6개월 넘게 하다보니 힘도 들고 점점 매너리즘이 오고 있었는데, 그래도 이러한 과정들을 통해 제가 지금 다니는 회사에 첫 출근하고 두달이 지나기 전까지의 개발에 대한 열정과 흥미를 다시 느낄 수 있었어서 정말 다행이라고 생각이 듭니다.

그리고 이 프로젝트를 잠시나마 진행해보면서 느낀점이 있다면 개발자는 단순히 개발에 대해서 많이 알아야 되는 것이 아니라는 것을 느꼈던 것 같습니다. 목적없이 단순히 개발에 대해서 많이 알고만 있는 것이 의미있는 행동이 아닐 수 있다라는 생각을 이번 사이드 프로젝트를 통해서 하게 되었고, 그래서 앞으로는 단순히 개발에 대해서 많이 알려고 하지 않고 사람들이 불편해할 수 있는 것들을 관찰하고 이를 어떻게 하면 이 문제를 보완할 수 있을지를 고민하면서 개발을 해야 되겠다는 생각을 되짚으면서 포스트 마무리 하겠습니다.

# 참고 링크

- [NginX 이해하기::Icarus](https://icarus8050.tistory.com/57)
- [웹 서버와 NginX](https://tecoble.techcourse.co.kr/post/2021-07-30-web-server-and-nginx/)
- [[Web]웹서버와 WAS의 차이를 쉽게 알아보자](https://codechasseur.tistory.com/25)
